{"ast":null,"code":"// frontend/src/components/LogProgress.js\nimport React,{useState,useEffect,useCallback}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LogProgress=()=>{const[progressData,setProgressData]=useState({exercisePlanId:'',exercises:[{exerciseTitle:'',status:''}],sessionNotes:''});// Use useCallback to memoize the fetchExercisePlan function\nconst fetchExercisePlan=useCallback(async()=>{try{const res=await axios.get('http://localhost:5000/api/exercise/patient-plan/your-patient-id',{headers:{Authorization:`Bearer ${localStorage.getItem('token')}`}});setProgressData(prevData=>({...prevData,exercisePlanId:res.data._id,exercises:res.data.exercises.map(ex=>({exerciseTitle:ex.title,status:''}))}));}catch(error){console.error(error);}},[]);// Empty dependency array means this function will only be created once\nuseEffect(()=>{fetchExercisePlan();},[fetchExercisePlan]);// Add fetchExercisePlan to the dependency array\nconst onChange=(e,index)=>{const{name,value}=e.target;const exercises=[...progressData.exercises];exercises[index][name]=value;setProgressData({...progressData,exercises});};const onSubmit=async e=>{e.preventDefault();try{const res=await axios.post('http://localhost:5000/api/progress/log-progress',progressData,{headers:{Authorization:`Bearer ${localStorage.getItem('token')}`}});alert(res.data.message);}catch(error){console.error(error);}};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Log Progress\"}),progressData.exercises.map((exercise,index)=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:exercise.exerciseTitle}),/*#__PURE__*/_jsxs(\"select\",{name:\"status\",value:exercise.status,onChange:e=>onChange(e,index),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Status\"}),/*#__PURE__*/_jsx(\"option\",{value:\"completed\",children:\"Completed\"}),/*#__PURE__*/_jsx(\"option\",{value:\"skipped\",children:\"Skipped\"}),/*#__PURE__*/_jsx(\"option\",{value:\"incomplete\",children:\"Incomplete\"})]})]},index)),/*#__PURE__*/_jsx(\"textarea\",{name:\"sessionNotes\",placeholder:\"Session Notes\",value:progressData.sessionNotes,onChange:e=>setProgressData({...progressData,sessionNotes:e.target.value})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit Progress\"})]});};export default LogProgress;","map":{"version":3,"names":["React","useState","useEffect","useCallback","axios","jsx","_jsx","jsxs","_jsxs","LogProgress","progressData","setProgressData","exercisePlanId","exercises","exerciseTitle","status","sessionNotes","fetchExercisePlan","res","get","headers","Authorization","localStorage","getItem","prevData","data","_id","map","ex","title","error","console","onChange","e","index","name","value","target","onSubmit","preventDefault","post","alert","message","children","exercise","placeholder","type"],"sources":["/Users/ripalshah/myofunctional-app/frontend/src/components/LogProgress.js"],"sourcesContent":["// frontend/src/components/LogProgress.js\nimport React, { useState, useEffect, useCallback } from 'react';\nimport axios from 'axios';\n\nconst LogProgress = () => {\n    const [progressData, setProgressData] = useState({\n        exercisePlanId: '',\n        exercises: [{ exerciseTitle: '', status: '' }],\n        sessionNotes: '',\n    });\n\n    // Use useCallback to memoize the fetchExercisePlan function\n    const fetchExercisePlan = useCallback(async () => {\n        try {\n            const res = await axios.get('http://localhost:5000/api/exercise/patient-plan/your-patient-id', {\n                headers: { Authorization: `Bearer ${localStorage.getItem('token')}` },\n            });\n            setProgressData((prevData) => ({\n                ...prevData,\n                exercisePlanId: res.data._id,\n                exercises: res.data.exercises.map((ex) => ({ exerciseTitle: ex.title, status: '' })),\n            }));\n        } catch (error) {\n            console.error(error);\n        }\n    }, []); // Empty dependency array means this function will only be created once\n\n    useEffect(() => {\n        fetchExercisePlan();\n    }, [fetchExercisePlan]); // Add fetchExercisePlan to the dependency array\n\n    const onChange = (e, index) => {\n        const { name, value } = e.target;\n        const exercises = [...progressData.exercises];\n        exercises[index][name] = value;\n        setProgressData({ ...progressData, exercises });\n    };\n\n    const onSubmit = async (e) => {\n        e.preventDefault();\n        try {\n            const res = await axios.post('http://localhost:5000/api/progress/log-progress', progressData, {\n                headers: { Authorization: `Bearer ${localStorage.getItem('token')}` },\n            });\n            alert(res.data.message);\n        } catch (error) {\n            console.error(error);\n        }\n    };\n\n    return (\n        <form onSubmit={onSubmit}>\n            <h2>Log Progress</h2>\n            {progressData.exercises.map((exercise, index) => (\n                <div key={index}>\n                    <label>{exercise.exerciseTitle}</label>\n                    <select name=\"status\" value={exercise.status} onChange={(e) => onChange(e, index)}>\n                        <option value=\"\">Select Status</option>\n                        <option value=\"completed\">Completed</option>\n                        <option value=\"skipped\">Skipped</option>\n                        <option value=\"incomplete\">Incomplete</option>\n                    </select>\n                </div>\n            ))}\n            <textarea\n                name=\"sessionNotes\"\n                placeholder=\"Session Notes\"\n                value={progressData.sessionNotes}\n                onChange={(e) => setProgressData({ ...progressData, sessionNotes: e.target.value })}\n            />\n            <button type=\"submit\">Submit Progress</button>\n        </form>\n    );\n};\n\nexport default LogProgress;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}